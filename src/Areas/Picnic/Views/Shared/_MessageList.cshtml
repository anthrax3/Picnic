@inject IMessenger Messenger
@using System.Collections.Generic
@using System.Threading.Tasks
@using ctorx.Core.Mvc.Messaging

@{
	var messages = this.Messenger.GetMessages();	
}

<div id="messages">
	@if (messages.Any())
	{
		<script>
			$(function() {
				@foreach (var message in messages)
				{
					var caption = message.Caption != null ? $"'{message.Caption}'" : "null";
					<text>app.msg("@message.Type", @Html.Raw(caption), "@Html.Raw(message.Text)");</text>
				}
			});
		</script>					
	}
</div>